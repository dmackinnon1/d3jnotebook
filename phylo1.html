<!DOCTYPE HTML>
<html>

<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1"> 
<script src="https://d3js.org/d3.v4.min.js"></script>
<title>D3jNotebook - exercise 3</title>
</head>
<style>

</style>
<body>
  <svg width="800" height="800">
  </svg>
</body>

<script>

/*
* Phyllotaxis spiral, plain.
*/

function range(n) {
  return Array.from((Array(n)).keys()) ;
};

function philo(n) {
  let d = n + 1; 
  return d*Math.PI*(Math.sqrt(5) +1);
}

function xComp(t) {
  return Math.cos(t);
}

function yComp(t) {
  return Math.sin(t);
}

function radial(n) {
  let d = n + 1;
  return Math.sqrt(d*100);
}

let total = 500;
let data = range(total);
let offset = 400;
let dotSize = 6;

let svg = d3.select("svg");
svg.selectAll("circle")
    .data(data)
    .enter().append("circle")
      .attr("cy", function(d) { return  offset + radial(d)*xComp(philo(d))})
      .attr("cx", function(d) { return offset + radial(d)*yComp(philo(d))})
      .attr("r", function(d) { return dotSize; });

svg.selectAll("circle").style("fill", "grey");

</script>
</html>
